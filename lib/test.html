<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Girly Text Area</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        body {
            background-color: #ffcdfd;
        }

        .girly-textarea {
            border: 2px solid #ff69b4;
            border-radius: 15px;
            color: #ff69b4;
            font-size: 1.5em;
            padding: 20px;
            background-color: #fff5fa;
            box-shadow: 0 0 10px #ff69b4;
        }

        .girly-textarea::placeholder {
            color: #ff69b4;
        }

        .girly-label {
            color: #ff69b4;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 2px 2px #ffcdfd;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .form-group {
            background: url('heart-pattern.png');
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 10px #ff69b4;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="form-group">
            <label for="girlyTextArea" class="girly-label">Your Thoughts</label>
            <textarea class="form-control girly-textarea" id="girlyTextArea" rows="10"
                placeholder="Type here..."></textarea>
        </div>
    </div>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        // Create WebSocket connection.
        const socket = new WebSocket('ws://localhost:5000');

        // Connection opened
        socket.addEventListener('open', function (event) {
            console.log('Connected to the WS Server!')
        });

        // Connection closed
        socket.addEventListener('close', function (event) {
            console.log('Disconnected from the WS Server!')
        });

        // Listen for messages
        socket.addEventListener('message', function (event) {
            console.log('Message from server ', event.data);

            // Get the textarea element and without erasing the previous text, add the new text from the websocket server
            document.getElementById('girlyTextArea').value += event.data;
        });

        // Send a msg to the websocket
        function sendMsg() {
            // Send a message to the websocket server from textarea
            console.log('Sending message to the WS Server!');
            console.log(document.getElementById('girlyTextArea').value);
            socket.send(document.getElementById('girlyTextArea').value);
        }

        // If the user pushes the shift+a key or shirt+A, send a msg to the websocket server running function sendMsg()
        document.addEventListener('keydown', function (event) {
            if (event.shiftKey && event.keyCode === 65) {
                event.preventDefault();
                sendMsg();
            }
        });
    </script>
</body>

</html>